<ng-container >
    <div class="container-fluid" #popup__formulario>
        <div class="container_form" #formRegisterContainerToAccountListBlock>
            <!-- <i class="far fa-times" (click)="this.sendHiddenFormRegister.emit(false);this.show__popup = false;"></i> -->
            <div #formRegister class="container_form_controls">
                <div class="form_control pt-1">
                    <label>Monto</label>
                    <div>(Ingrese monto)</div>
                    <div class="st_block_amount d-flex align-items-center">
                        <span>S/</span>
                        <input type="text" placeholder="0.00" [(ngModel)]="expense.amountShow" [readOnly]="flagReceiveNotificationParamRoute">
                    </div>
                </div>
                <div class="form_control pt-1">
                    <label>Descripción(optional)</label>
                    <div class="form_contain_textarea">
                        <textarea rows="2" type="text" [(ngModel)]="expense.description"></textarea>
                        <div class="container-tags">
                            <div *ngFor="let tag of tagListSelected;">
                               <span>#{{tag.tagName}}</span> 
                                <i class="fas fa-times" (click)="deleteItemFromListaTag(tag)"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form_control">
                    <div class="st_content_aditionals_items d-flex justify-content-between">
                        <div class="st_item" (click)="showListCategories()">
                            <img src="{{itemCategory.image}}" alt="" srcset="">
                            <label>Category</label>
                            <div>(Seleccione)</div>
                            <span>{{itemCategory.name}}</span>
                        </div>
                        <div class="st_item" (click)="showListAccording()">
                            <img src="{{itemAccording.image}}" alt="" srcset="">
                            <label>Acuerdo</label>
                            <div>(Seleccione)</div>
                            <span>{{itemAccording.name}}</span>
                        </div>
                        <div class="st_item" (click)="showListPaymentMethods()">
                            <img src="{{itemPaymentMethod.image}}" alt="" srcset="">
                            <label>Medio de Pago</label>
                            <div>(Seleccione)</div>
                            <span>{{itemPaymentMethod.name}}</span>
                        </div>
                    </div>
                </div>
                <div class="form_control pt-1">
                    <div class="st_content_attach">
                        <label *ngIf="flagShowBtnSelectCalendar" (click)="showCalendar()" class="st_button_upload_voucher">
                                <span>Fecha: </span>
                                <span>{{dateRangeCalendarSelected | date: 'EEE dd MMM  HH:mm:ss' | uppercase}}</span>
                                <i class="fas fa-calendar"></i>
                        </label>
                        <ng-container>
                            <label (click)="showListOptionsSelect('tags')" class="st_button_upload_voucher st_bgcolor_whopay">
                                <span>Agregar Tags</span>
                                <span>(Optional)</span>
                                <i class="fas fa-hashtag"></i>
                            </label>
                        </ng-container>
                        <ng-container *ngIf="itemAccording.id == 2 || itemAccording.id == 3 || itemAccording.id == 4 || itemAccording.id == 7">
                            <label *ngIf="payerSelected == ''; else ownerSelected;"
                                (click)="showListOptionsSelect('payer')" class="st_button_upload_voucher st_bgcolor_whopay">
                                <span>Quien paga</span>
                                <span>(Optional)</span>
                                <i class="fas fa-envelope-open-dollar"></i>
                            </label>
                        </ng-container>
                        <ng-container *ngIf="accountListSelected.length>0">
                            <label *ngIf="itemAccount.id==0; else accountSelected;"
                                (click)="showListOptionsSelect('accounts')" class="st_button_upload_voucher st_bgcolor_whopay">
                                <span>Account:</span>
                                <span>(Optional)</span>
                                <i class="fas fa-money-check-edit-alt"></i>
                            </label>
                        </ng-container>
                        
                        <label class="st_button_upload_voucher" for='myFileM'>
                            <input style="display: none;" accept=".png, .jpg, .jpeg" multiple 
                                (change)="uploadFoto($event)" 
                                type="file" id="myFileM"
                                class="st_img_upload"
                                >
                                <span>Subir voucher (2 máx)</span>
                                <i class="fas fa-arrow-alt-square-up"></i>
                        </label>
                        <div class="container-vouchers" >
                            <span class="st_voucher" *ngFor="let voucher of vouchersListToShow; let i = index" >
                                <img src="{{voucher}}"  accept="image/png, image/jpeg, image/jpg"  alt="" srcset="">
                                <i class="close-voucher fas fa-times st_delete_voucher" (click)="removeVoucherFromList(i)"></i>
                            </span>
                        </div>
                    </div>
                </div>
               
            </div>
            <button (click)="registerOrUpdateExpense(expense.id)">{{textActionButton}}</button>



            <!-- Lista de items POP-UP-->
            <div class="st_lista_items_select" *ngIf="show__list__items">
                <!-- <i class="fas fa-times" (click)="hiddenPopUp()"></i> -->
                    <app-list-payment-method 
                        [receivedOrderSelectedItem]="flagShowListPaymentMethod"
                        (sendItemSelectedToFormExpense)="receivedItemSelectedaFromPopUp($event)" 
                        *ngIf="flagShowListPaymentMethod">
                    </app-list-payment-method>
                    <app-list-category       
                        [receivedOrderSelectedItem]="flagShowListCategories"
                        (sendItemSelectedToFormExpense)="receivedItemSelectedaFromPopUp($event)" 
                        *ngIf="flagShowListCategories">
                    </app-list-category>
                    <app-list-according      
                        [receivedOrderSelectedItem]="flagShowListAccording"
                        (sendItemSelectedToFormExpense)="receivedItemSelectedaFromPopUp($event)" 
                        *ngIf="flagShowListAccording">
                    </app-list-according>
                    <app-calendar *ngIf="flagShowCalendar"
                        [receivedComponentParent]="sendComponentParentToCalendar"
                        (sendResponseFromCalendarToParent)="receivedItemSelectedaFromPopUp($event)"
                    ></app-calendar>
                    <app-list-accounts-shared *ngIf="flagShowListOptionsSelect"
                            [heightContainerChild]="heightFormRegisterExpense"
                            [flagShowComponentReceived]="flagShowListOptionsSelect"
                            [dataOptionsSelectExpenseListReceived]="dataOptionsSelectExpenseList"
                            (sendEmittAccountSelected)="receivedItemSelectedaFromPopUp($event)"
                    ></app-list-accounts-shared>
            </div>
        </div>
    
    </div>
</ng-container>


<ng-template #accountSelected>
    <div (click)="showListOptionsSelect('accounts')" 
        class="st_form_destiny d-flex justify-content-between align-items-center"
        [ngStyle]="{'color':(itemAccount.balanceFlow == '0') ? 'red' : '#366351',
                    'border-color':(itemAccount.balanceFlow == '0') ? 'red' : '#366351'}">
        <span>ACC: {{itemAccount.accountName}}</span>
        <span>S/ {{itemAccount.balanceFlow | number: '1.2-2'}}</span>
    </div>
</ng-template>

<ng-template #ownerSelected>
    <div (click)="showListOptionsSelect('payer')" 
        class="st_form_destiny d-flex justify-content-between align-items-center"
        [ngStyle]="{'color':(itemAccount.balanceFlow == '0') ? 'red' : '#366351',
                    'border-color':(itemAccount.balanceFlow == '0') ? 'red' : '#366351'}">
        <span>Payer: {{payerSelected}}</span>
        <span><i class="fas fa-user-circle"></i></span>
    </div>
</ng-template>


